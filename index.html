<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cartoon Rock Paper Scissors Sandbox</title>
<style>
    body {
        margin: 0;
        background: #f0f0f0;
        overflow: hidden;
        font-family: sans-serif;
        display: flex;
        flex-direction: column;
        height: 100vh;
    }
    canvas {
        flex: 1;
        display: block;
        background: #d9f0ff;
    }
    .controls {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        padding: 5px;
        background: rgba(0,0,0,0.7);
        color: white;
        font-size: 14px;
    }
    .controls label, .controls span {
        margin: 5px;
    }
    .controls input, .controls button {
        margin: 5px;
        padding: 5px;
        font-size: 14px;
        border-radius: 5px;
        border: none;
    }
    .controls button {
        background: #ff9800;
        color: white;
        cursor: pointer;
    }
    .controls button:hover {
        background: #e68a00;
    }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div class="controls">
    <label>Speed: <input type="range" id="speedSlider" min="0.5" max="5" value="2" step="0.1"></label>
    <button id="addRandom">Add Random</button>
    <button id="addEach">Add One of Each</button>
    <label>Count: <input type="number" id="countInput" value="5" min="1"></label>
    <button id="spawnCount">Spawn</button>
    <button id="pauseResume">Pause</button>
    <button id="reset">Reset</button>
    <span>Rocks: <span id="rockCount">0</span></span>
    <span>Papers: <span id="paperCount">0</span></span>
    <span>Scissors: <span id="scissorCount">0</span></span>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let W = window.innerWidth;
let H = window.innerHeight - document.querySelector('.controls').offsetHeight;
canvas.width = W;
canvas.height = H;

window.addEventListener('resize', () => {
    W = window.innerWidth;
    H = window.innerHeight - document.querySelector('.controls').offsetHeight;
    canvas.width = W;
    canvas.height = H;
});

const speedSlider = document.getElementById('speedSlider');
let speedMultiplier = parseFloat(speedSlider.value);
speedSlider.addEventListener('input', () => {
    speedMultiplier = parseFloat(speedSlider.value);
});

const rockCountEl = document.getElementById('rockCount');
const paperCountEl = document.getElementById('paperCount');
const scissorCountEl = document.getElementById('scissorCount');

class Particle {
    constructor(x, y, color) {
        this.x = x;
        this.y = y;
        this.radius = Math.random() * 3 + 2;
        this.color = color;
        this.vx = (Math.random() - 0.5) * 4;
        this.vy = (Math.random() - 0.5) * 4;
        this.life = 30;
    }
    update() {
        this.x += this.vx;
        this.y += this.vy;
        this.life--;
    }
    draw() {
        ctx.beginPath();
        ctx.fillStyle = this.color;
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
        ctx.fill();
    }
}

class Entity {
    constructor(type, x, y) {
        this.type = type;
        this.x = x;
        this.y = y;
        this.size = 40;
        this.vx = (Math.random() - 0.5) * 3;
        this.vy = (Math.random() - 0.5) * 3;
        this.animFrame = 0;
    }
    update() {
        this.x += this.vx * speedMultiplier;
        this.y += this.vy * speedMultiplier;
        if (this.x < 0 || this.x > W) this.vx *= -1;
        if (this.y < 0 || this.y > H) this.vy *= -1;
        this.animFrame++;
    }
    draw() {
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.lineWidth = 2;
        ctx.strokeStyle = "#000";

        if (this.type === "rock") {
            ctx.fillStyle = "#b0a090";
            ctx.beginPath();
            for (let i = 0; i < Math.PI*2; i += Math.PI/6) {
                let r = this.size/2 + Math.sin(this.animFrame/10 + i*3)*3;
                ctx.lineTo(Math.cos(i)*r, Math.sin(i)*r);
            }
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
        }
        if (this.type === "paper") {
            ctx.fillStyle = "#fff";
            ctx.beginPath();
            ctx.rect(-this.size/2, -this.size/1.5, this.size, this.size*1.2);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath(); // Fold corner
            ctx.moveTo(this.size/2, -this.size/1.5);
            ctx.lineTo(this.size/2 - 10, -this.size/1.5 + 10);
            ctx.lineTo(this.size/2, -this.size/1.5 + 20);
            ctx.fillStyle = "#eee";
            ctx.fill();
            ctx.stroke();
            // Wiggle
            ctx.translate(Math.sin(this.animFrame/10)*2, 0);
        }
        if (this.type === "scissor") {
            ctx.strokeStyle = "#000";
            ctx.fillStyle = "#ccc";
            ctx.beginPath(); // blade 1
            ctx.moveTo(0, 0);
            ctx.lineTo(this.size/2, -this.size/2);
            ctx.stroke();
            ctx.beginPath(); // blade 2
            ctx.moveTo(0, 0);
            ctx.lineTo(this.size/2, this.size/2);
            ctx.stroke();
            ctx.fillStyle = "red";
            ctx.beginPath();
            ctx.arc(-5, -5, 7, 0, Math.PI*2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(-5, 5, 7, 0, Math.PI*2);
            ctx.fill();
        }

        ctx.restore();
    }
}

let entities = [];
let particles = [];

function spawn(type) {
    entities.push(new Entity(type, Math.random()*W, Math.random()*H));
}

function updateCounts() {
    rockCountEl.textContent = entities.filter(e => e.type === "rock").length;
    paperCountEl.textContent = entities.filter(e => e.type === "paper").length;
    scissorCountEl.textContent = entities.filter(e => e.type === "scissor").length;
}

function gameLogic() {
    for (let i = 0; i < entities.length; i++) {
        for (let j = i+1; j < entities.length; j++) {
            const a = entities[i];
            const b = entities[j];
            const dx = a.x - b.x;
            const dy = a.y - b.y;
            const dist = Math.hypot(dx, dy);
            if (dist < (a.size/2 + b.size/2)) {
                let winner, loser;
                if (a.type === "rock" && b.type === "scissor") { winner = a; loser = b; }
                else if (a.type === "scissor" && b.type === "paper") { winner = a; loser = b; }
                else if (a.type === "paper" && b.type === "rock") { winner = a; loser = b; }
                else if (b.type === "rock" && a.type === "scissor") { winner = b; loser = a; }
                else if (b.type === "scissor" && a.type === "paper") { winner = b; loser = a; }
                else if (b.type === "paper" && a.type === "rock") { winner = b; loser = a; }
                if (winner && loser) {
                    for (let p = 0; p < 10; p++) {
                        particles.push(new Particle(loser.x, loser.y, "#ff0"));
                    }
                    loser.type = winner.type;
                }
            }
        }
    }
}

let paused = false;

function animate() {
    if (!paused) {
        ctx.clearRect(0, 0, W, H);
        entities.forEach(e => { e.update(); e.draw(); });
        particles.forEach(p => { p.update(); p.draw(); });
        particles = particles.filter(p => p.life > 0);
        gameLogic();
        updateCounts();
    }
    requestAnimationFrame(animate);
}

document.getElementById('addRandom').onclick = () => {
    const types = ["rock", "paper", "scissor"];
    spawn(types[Math.floor(Math.random()*3)]);
};
document.getElementById('addEach').onclick = () => {
    spawn("rock"); spawn("paper"); spawn("scissor");
};
document.getElementById('spawnCount').onclick = () => {
    const count = parseInt(document.getElementById('countInput').value);
    const types = ["rock", "paper", "scissor"];
    for (let i = 0; i < count; i++) spawn(types[Math.floor(Math.random()*3)]);
};
document.getElementById('pauseResume').onclick = () => {
    paused = !paused;
    document.getElementById('pauseResume').textContent = paused ? "Resume" : "Pause";
};
document.getElementById('reset').onclick = () => {
    entities = [];
    particles = [];
    updateCounts();
};

animate();
</script>
</body>
</html>
